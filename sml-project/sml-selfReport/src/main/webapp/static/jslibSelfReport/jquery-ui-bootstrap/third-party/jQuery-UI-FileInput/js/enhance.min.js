(function(aA,az,ay){function al(){return !!az.cookie}function ak(){Q(ax.testName,"fail");aA.location.reload()}function aj(){Q(ax.testName,"pass");aA.location.reload()}function ai(){O(ax.testName);aA.location.reload()}function ah(){av=az.createElement("body");ar.insertBefore(av,ar.firstChild);aw=av}function ag(){ar.removeChild(av);aw=az.body}function af(){var e=P(ax.testName);if(e){if(e==="pass"){ab();ax.onPass()}else{ax.onFail();ac()}ax.appendToggleLink&&ae(function(){ad(e)})}else{var d=!0;ah();for(var f in ax.tests){d=ax.tests[f]();if(!d){ax.alertOnFailure&&alert(f+" failed");break}}ag();e=d?"pass":"fail";Q(ax.testName,e);if(d){ab();ax.onPass()}else{ax.onFail();ac()}ax.appendToggleLink&&ae(function(){ad(e)})}}function ae(a){if(au){a()}else{var d=aA.onload;aA.onload=function(){d&&d();a()}}}function ad(b){if(!ax.appendToggleLink||!enhance.cookiesSupported){return}if(b){var d=az.createElement("a");d.href="#";d.className=ax.testName+"_toggleResult";d.innerHTML=b==="pass"?ax.forceFailText:ax.forcePassText;d.onclick=b==="pass"?enhance.forceFail:enhance.forcePass;az.getElementsByTagName("body")[0].appendChild(d)}}function ac(){ar.className=ar.className.replace(ax.testName,"")}function ab(){aq=!0;ax.loadStyles.length&&W();ax.loadScripts.length?U():ax.onScriptsLoaded()}function aa(a,d){if(P(ap)&&P(ao)){O(ap);O(ao)}else{Q(ap,a);Q(ao,d)}aA.location.reload()}function Z(b){an.length==2&&(b==an[0]?b=an[1]:b==an[1]&&(b=an[0]));return b}function Y(){var b=ax.testName+"-incomplete";ar.className.indexOf(b)===-1&&(ar.className+=" "+b)}function X(e){if(e.constructor===Array){var d=!0;for(var f in e){d&&(d=!!e[f])}return d}return !!e}function W(){var b=-1,j;while(j=ax.loadStyles[++b]){var h=az.createElement("link");h.type="text/css";h.rel="stylesheet";h.onerror=ax.onLoadError;if(typeof j=="string"){h.href=j;at.appendChild(h)}else{if(j.media){j.media=Z(j.media);ax.media&&ax.media[j.media]!==ay&&(j.media=ax.media[j.media])}j.excludemedia&&(j.excludemedia=Z(j.excludemedia));var d=!0;j.media&&j.media!=="print"&&j.media!=="projection"&&j.media!=="speech"&&j.media!=="aural"&&j.media!=="braille"&&(d=am(j.media));d&&j.excludemedia&&(d=!am(j.excludemedia));d&&j.iecondition&&(d=V(j.iecondition));if(d&&j.ifsupported!==ay){d=X(j.ifsupported);if(!d&&j.fallback!==ay){j.href=j.fallback;d=!0}}if(d){for(var c in j){c!=="iecondition"&&c!=="excludemedia"&&c!=="ifsupported"&&c!=="fallback"&&h.setAttribute(c,j[c])}at.appendChild(h)}}}}function U(){ax.queueLoading?T():S()}function T(){function c(){if(d.length===0){return !1}var g=d.shift(),b=R(g),a=!1;if(!b){return c()}b.onload=b.onreadystatechange=function(){if(!a&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){a=!0;c()===!1&&ax.onScriptsLoaded();this.onload=this.onreadystatechange=null}};at.insertBefore(b,at.firstChild)}var d=[].concat(ax.loadScripts);c()}function S(){var e=-1,d;while(d=ax.loadScripts[++e]){var f=R(d);f&&at.insertBefore(f,at.firstChild)}ax.onScriptsLoaded()}function R(b){var h=az.createElement("script");h.type="text/javascript";h.onerror=ax.onLoadError;if(typeof b=="string"){h.src=b;return h}if(b.media){b.media=Z(b.media);ax.media&&ax.media[b.media]&&(b.media=ax.media[b.media])}b.excludemedia&&(b.excludemedia=Z(b.excludemedia));var d=!0;b.media&&(d=am(b.media));d&&b.excludemedia&&(d=!am(b.excludemedia));d&&b.iecondition&&(d=V(b.iecondition));if(d&&b.ifsupported!==ay){d=X(b.ifsupported);if(!d&&b.fallback!==ay){b.src=b.fallback;d=!0}}if(d){for(var c in b){c!=="iecondition"&&c!=="media"&&c!=="excludemedia"&&c!=="ifsupported"&&c!=="fallback"&&h.setAttribute(c,b[c])}return h}return !1}function Q(b,j,i){i=i||90;var h=new Date;h.setTime(h.getTime()+i*24*60*60*1000);var g="; expires="+h.toGMTString();az.cookie=b+"="+j+g+"; path=/"}function P(b){var j=b+"=",i=az.cookie.split(";");for(var h=0;h<i.length;h++){var g=i[h];while(g.charAt(0)==" "){g=g.substring(1,g.length)}if(g.indexOf(j)==0){return g.substring(j.length,g.length)}}return null}function O(b){Q(b,"",-1)}function N(){if(az.readyState==null&&az.addEventListener){az.addEventListener("DOMContentLoaded",function b(){az.removeEventListener("DOMContentLoaded",b,!1);az.readyState="complete"},!1);az.readyState="loading"}}var ax,aw,av,au,at,ar=az.documentElement,aq=!1,ap,ao,an=[];az.getElementsByTagName?at=az.getElementsByTagName("head")[0]||ar:at=ar;var am=function(){var b={},c=az.createElement("div");c.setAttribute("id","ejs-qtest");return function(h){if(b[h]===ay){ah();var e=az.createElement("style");e.type="text/css";at.appendChild(e);var d="@media "+h+" { #ejs-qtest { position: absolute; width: 10px; } }";e.styleSheet?e.styleSheet.cssText=d:e.appendChild(az.createTextNode(d));aw.appendChild(c);var a=c.offsetWidth;aw.removeChild(c);at.removeChild(e);ag();b[h]=a==10}return b[h]}}();aA.enhance=function(d){d=d||{};ax={};for(var c in enhance.defaultSettings){var h=d[c];ax[c]=h!==ay?h:enhance.defaultSettings[c]}for(var g in d.addTests){ax.tests[g]=d.addTests[g]}ar.className.indexOf(ax.testName)===-1&&(ar.className+=" "+ax.testName);ap=ax.testName+"-toggledmediaA";ao=ax.testName+"-toggledmediaB";an=[P(ap),P(ao)];setTimeout(function(){aq||ac()},3000);af();N();ae(function(){au=!0})};enhance.query=am;enhance.defaultTests={getById:function(){return !!az.getElementById},getByTagName:function(){return !!az.getElementsByTagName},createEl:function(){return !!az.createElement},boxmodel:function(){var b=az.createElement("div");b.style.cssText="width: 1px; padding: 1px;";aw.appendChild(b);var d=b.offsetWidth;aw.removeChild(b);return d===3},position:function(){var b=az.createElement("div");b.style.cssText="position: absolute; left: 10px;";aw.appendChild(b);var d=b.offsetLeft;aw.removeChild(b);return d===10},floatClear:function(){var b=!1,n=az.createElement("div"),m='style="width: 5px; height: 5px; float: left;"';n.innerHTML="<div "+m+"></div><div "+m+"></div>";aw.appendChild(n);var l=n.childNodes,k=l[0].offsetTop,j=l[1],e=j.offsetTop;if(k===e){j.style.clear="left";e=j.offsetTop;k!==e&&(b=!0)}aw.removeChild(n);return b},heightOverflow:function(){var b=az.createElement("div");b.innerHTML='<div style="height: 10px;"></div>';b.style.cssText="overflow: hidden; height: 0;";aw.appendChild(b);var d=b.offsetHeight;aw.removeChild(b);return d===0},ajax:function(){var g=!1,f=-1,j,i=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];while(j=i[++f]){try{g=j()}catch(h){continue}break}return !!g},resize:function(){return aA.onresize!=0},print:function(){return !!aA.print}};enhance.defaultSettings={testName:"enhanced",loadScripts:[],loadStyles:[],queueLoading:!0,appendToggleLink:!0,forcePassText:"View high-bandwidth version",forceFailText:"View low-bandwidth version",tests:enhance.defaultTests,media:{"-ejs-desktop":enhance.query("screen and (max-device-width: 1024px)")?"not screen and (max-device-width: 1024px)":"screen","-ejs-handheld":"screen and (max-device-width: 1024px)"},addTests:{},alertOnFailure:!1,onPass:function(){},onFail:function(){},onLoadError:Y,onScriptsLoaded:function(){}};enhance.cookiesSupported=al();enhance.cookiesSupported&&(enhance.forceFail=ak);enhance.cookiesSupported&&(enhance.forcePass=aj);enhance.cookiesSupported&&(enhance.reTest=ai);enhance.toggleMedia=aa;var V=function(){var b={},c;return function(a){return !1}}()})(window,document);